import{v as V,h as O,d as M,i as Q,p as E,j as A,k as z,l as F,m as N,q as X,s as x,x as G,y as q,z as H,A as Y,B as J,V as L,C as U,D as W,E as j,G as Z,H as K}from"./index.d4427e25.js";function ee(e){if(typeof e=="number")return{"":e.toString()};const t={};return e.split(/ +/).forEach(n=>{if(n==="")return;const[s,o]=n.split(":");o===void 0?t[""]=s:t[s]=o}),t}function b(e,t){var n;if(e==null)return;const s=ee(e);if(t===void 0)return s[""];if(typeof t=="string")return(n=s[t])!==null&&n!==void 0?n:s[""];if(Array.isArray(t)){for(let o=t.length-1;o>=0;--o){const a=t[o];if(a in s)return s[a]}return s[""]}else{let o,a=-1;return Object.keys(s).forEach(u=>{const i=Number(u);!Number.isNaN(i)&&t>=i&&i>=a&&(a=i,o=s[u])}),o}}function te(e){var t;const n=(t=e.dirs)===null||t===void 0?void 0:t.find(({dir:s})=>s===V);return!!(n&&n.value===!1)}const k=1,P=O("n-grid"),T=1,se={span:{type:[Number,String],default:T},offset:{type:[Number,String],default:0},suffix:Boolean,privateOffset:Number,privateSpan:Number,privateColStart:Number,privateShow:{type:Boolean,default:!0}};var ie=M({__GRID_ITEM__:!0,name:"GridItem",alias:["Gi"],props:se,setup(){const{isSsrRef:e,xGapRef:t,itemStyleRef:n,overflowRef:s}=Q(P),o=z();return{overflow:s,itemStyle:n,deriveStyle:()=>{e.value;const{privateSpan:a=T,privateShow:u=!0,privateColStart:i=void 0,privateOffset:v=0}=o.vnode.props,{value:p}=t,S=E(p||0);return{display:u?"":"none",gridColumn:`${i!=null?i:`span ${a}`} / span ${a}`,marginLeft:v?`calc((100% - (${a} - 1) * ${S}) / ${a} * ${v} + ${S} * ${v})`:""}}}},render(){var e,t;return A("div",{style:[this.itemStyle,this.deriveStyle()]},(t=(e=this.$slots).default)===null||t===void 0?void 0:t.call(e,{overflow:this.overflow}))}});const re={xs:0,s:640,m:1024,l:1280,xl:1536,xxl:1920},D=24,$="__ssr__",ne={responsive:{type:[String,Boolean],default:"self"},cols:{type:[Number,String],default:D},itemResponsive:Boolean,collapsed:Boolean,collapsedRows:{type:Number,default:1},itemStyle:[Object,String],xGap:{type:[Number,String],default:0},yGap:{type:[Number,String],default:0}};var ae=M({name:"Grid",inheritAttrs:!1,props:ne,setup(e){const{mergedClsPrefixRef:t,mergedBreakpointsRef:n}=F(e),s=/^\d+$/,o=N(void 0),a=X((n==null?void 0:n.value)||re),u=x(()=>!!(e.itemResponsive||!s.test(e.cols.toString())||!s.test(e.xGap.toString())||!s.test(e.yGap.toString()))),i=G(()=>{if(!!u.value)return e.responsive==="self"?o.value:a.value}),v=x(()=>{var l;return(l=Number(b(e.cols.toString(),i.value)))!==null&&l!==void 0?l:D}),p=x(()=>b(e.xGap.toString(),i.value)),S=x(()=>b(e.yGap.toString(),i.value)),C=l=>{o.value=l.contentRect.width},c=l=>{K(C,l)},w=N(!1),R=G(()=>{if(e.responsive==="self")return c}),f=N(!1),m=N();return q(()=>{const{value:l}=m;l&&l.hasAttribute($)&&(l.removeAttribute($),f.value=!0)}),H(P,{isSsrRef:f,itemStyleRef:Y(e,"itemStyle"),xGapRef:p,overflowRef:w}),{isSsr:!J,contentEl:m,mergedClsPrefix:t,style:G(()=>({width:"100%",display:"grid",gridTemplateColumns:`repeat(${v.value}, minmax(0, 1fr))`,columnGap:E(p.value),rowGap:E(S.value)})),isResponsive:u,responsiveQuery:i,responsiveCols:v,handleResize:R,overflow:w}},render(){const e=()=>{var t,n,s,o,a,u,i;this.overflow=!1;const v=U(W(this)),p=[],{collapsed:S,collapsedRows:C,responsiveCols:c,responsiveQuery:w}=this;v.forEach(r=>{var _,h,d,g;if(((_=r==null?void 0:r.type)===null||_===void 0?void 0:_.__GRID_ITEM__)!==!0)return;if(te(r)){const y=j(r);y.props?y.props.privateShow=!1:y.props={privateShow:!1},p.push({child:y,rawChildSpan:0});return}r.dirs=((h=r.dirs)===null||h===void 0?void 0:h.filter(({dir:y})=>y!==V))||null;const B=j(r),I=Number((g=b((d=B.props)===null||d===void 0?void 0:d.span,w))!==null&&g!==void 0?g:k);I!==0&&p.push({child:B,rawChildSpan:I})});let R=0;const f=(t=p[p.length-1])===null||t===void 0?void 0:t.child;if(f!=null&&f.props){const r=(n=f.props)===null||n===void 0?void 0:n.suffix;r!==void 0&&r!==!1&&(R=(o=(s=f.props)===null||s===void 0?void 0:s.span)!==null&&o!==void 0?o:k,f.props.privateSpan=R,f.props.privateColStart=c+1-R,f.props.privateShow=(a=f.props.privateShow)!==null&&a!==void 0?a:!0)}let m=0,l=!1;for(const{child:r,rawChildSpan:_}of p){if(l&&(this.overflow=!0),!l){const h=Number((i=b((u=r.props)===null||u===void 0?void 0:u.offset,w))!==null&&i!==void 0?i:0),d=Math.min(_+h,c);if(r.props?(r.props.privateSpan=d,r.props.privateOffset=h):r.props={privateSpan:d,privateOffset:h},S){const g=m%c;d+g>c&&(m+=c-g),d+m+R>C*c?l=!0:m+=d}}l&&(r.props?r.props.privateShow!==!0&&(r.props.privateShow=!1):r.props={privateShow:!1})}return A("div",Z({ref:"contentEl",class:`${this.mergedClsPrefix}-grid`,style:this.style,[$]:this.isSsr||void 0},this.$attrs),p.map(({child:r})=>r))};return this.isResponsive&&this.responsive==="self"?A(L,{onResize:this.handleResize},{default:e}):e()}});export{ie as N,ae as a};
