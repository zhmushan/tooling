import{h as V,d as B,i as E,p as _,j as C,k as P,l as M,m as $,q as O,s as x,v as N,x as D,y as Q,V as T,z,A as X,B as q,C as F,D as Y}from"./index.5b1a4f75.js";function H(e){if(typeof e=="number")return{"":e.toString()};const t={};return e.split(/ +/).forEach(i=>{if(i==="")return;const[s,n]=i.split(":");n===void 0?t[""]=s:t[s]=n}),t}function g(e,t){var i;if(e==null)return;const s=H(e);if(t===void 0)return s[""];if(typeof t=="string")return(i=s[t])!==null&&i!==void 0?i:s[""];if(Array.isArray(t)){for(let n=t.length-1;n>=0;--n){const a=t[n];if(a in s)return s[a]}return s[""]}else{let n,a=-1;return Object.keys(s).forEach(l=>{const o=Number(l);!Number.isNaN(o)&&t>=o&&o>=a&&(a=o,n=s[l])}),n}}const I=1,j=V("n-grid"),k=1,J={span:{type:[Number,String],default:k},offset:{type:[Number,String],default:0},suffix:Boolean,privateOffset:Number,privateSpan:Number,privateColStart:Number,privateShow:{type:Boolean,default:!0}};var Z=B({__GRID_ITEM__:!0,name:"GridItem",alias:["Gi"],props:J,setup(){const{xGapRef:e,itemStyleRef:t,overflowRef:i}=E(j),s=P();return{overflow:i,itemStyle:t,deriveStyle:()=>{const{privateSpan:n=k,privateShow:a=!0,privateColStart:l=void 0,privateOffset:o=0}=s.vnode.props,{value:u}=e,c=_(u||0);return{display:a?"":"none",gridColumn:`${l!=null?l:`span ${n}`} / span ${n}`,marginLeft:o?`calc((100% - (${n} - 1) * ${c}) / ${n} * ${o} + ${c} * ${o})`:""}}}},render(){var e,t;return C("div",{style:[this.itemStyle,this.deriveStyle()]},(t=(e=this.$slots).default)===null||t===void 0?void 0:t.call(e,{overflow:this.overflow}))}});const L={xs:0,s:640,m:1024,l:1280,xl:1536,xxl:1920},A=24,U={responsive:{type:[String,Boolean],default:"self"},cols:{type:[Number,String],default:A},itemResponsive:Boolean,collapsed:Boolean,collapsedRows:{type:Number,default:1},itemStyle:[Object,String],xGap:{type:[Number,String],default:0},yGap:{type:[Number,String],default:0}};var K=B({name:"Grid",inheritAttrs:!1,props:U,setup(e){const{mergedClsPrefixRef:t,mergedBreakpointsRef:i}=M(e),s=/^\d+$/,n=$(void 0),a=O((i==null?void 0:i.value)||L),l=x(()=>!!(e.itemResponsive||!s.test(e.cols.toString())||!s.test(e.xGap.toString())||!s.test(e.yGap.toString()))),o=N(()=>{if(!!l.value)return e.responsive==="self"?n.value:a.value}),u=x(()=>{var f;return(f=Number(g(e.cols.toString(),o.value)))!==null&&f!==void 0?f:A}),c=x(()=>g(e.xGap.toString(),o.value)),w=x(()=>g(e.yGap.toString(),o.value)),v=f=>{n.value=f.contentRect.width},y=f=>{Y(v,f)},m=$(!1),p=N(()=>{if(e.responsive==="self")return y});return D(j,{itemStyleRef:Q(e,"itemStyle"),xGapRef:c,overflowRef:m}),{mergedClsPrefix:t,style:N(()=>({width:"100%",display:"grid",gridTemplateColumns:`repeat(${u.value}, minmax(0, 1fr))`,columnGap:_(c.value),rowGap:_(w.value)})),isResponsive:l,responsiveQuery:o,responsiveCols:u,handleResize:p,overflow:m}},render(){const e=()=>{var t,i,s,n,a,l;this.overflow=!1;const o=z(X(this)),u=[],{collapsed:c,collapsedRows:w,responsiveCols:v,responsiveQuery:y}=this;o.forEach(r=>{var R,h,d;if(((R=r==null?void 0:r.type)===null||R===void 0?void 0:R.__GRID_ITEM__)!==!0)return;const S=q(r),G=Number((d=g((h=S.props)===null||h===void 0?void 0:h.span,y))!==null&&d!==void 0?d:I);G!==0&&u.push({child:S,rawChildSpan:G})});let m=0;const p=(t=u[u.length-1])===null||t===void 0?void 0:t.child;if(p!=null&&p.props){const r=(i=p.props)===null||i===void 0?void 0:i.suffix;r!==void 0&&r!==!1&&(m=(n=(s=p.props)===null||s===void 0?void 0:s.span)!==null&&n!==void 0?n:I,p.props.privateSpan=m,p.props.privateColStart=v+1-m,p.props.privateShow=!0)}let f=0,b=!1;for(const{child:r,rawChildSpan:R}of u){if(b&&(this.overflow=!0),!b){const h=Number((l=g((a=r.props)===null||a===void 0?void 0:a.offset,y))!==null&&l!==void 0?l:0),d=Math.min(R+h,v)||1;if(r.props?(r.props.privateSpan=d,r.props.privateOffset=h):r.props={privateSpan:d,privateOffset:h},c){const S=f%v;d+S>v&&(f+=v-S),d+f+m>w*v?b=!0:f+=d}}b&&(r.props?r.props.privateShow!==!0&&(r.props.privateShow=!1):r.props={privateShow:!1})}return C("div",F({class:`${this.mergedClsPrefix}-grid`,style:this.style},this.$attrs),u.map(({child:r})=>r))};return this.isResponsive&&this.responsive==="self"?C(T,{onResize:this.handleResize},{default:e}):e()}});export{Z as N,K as a};
